<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <link th:href="@{/css/bootstrap.min.css}" href="/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <style>
    .form-control {
      border-radius: 0.375rem;
      padding: 10px;
      font-size: 1rem;
    }

    .btn {
      font-size: 1.125rem;
      padding: 12px;
      border-radius: 0.375rem;
    }

    .btn-lg {
      padding: 14px 20px;
    }

    h2 {
      font-size: 1.75rem;
      margin-bottom: 1.5rem;
    }

    html, body {
      height: 100%;
      margin: 0;
      position: relative;
    }

    .footer {
      background-color: #f8f9fa;
      color: #333;
      text-align: center;
      padding: 20px 0;
      position: absolute;
      bottom: 0;
      width: 100%;
    }

    .container {
      padding-bottom: 60px;
    }

    .price {
      font-size: 1.25rem;
      font-weight: bold;
    }

    .total-price {
      font-size: 1.5rem;
      font-weight: bold;
      color: #007bff;
    }
  </style>
</head>
<body>
<div th:replace="~{fragments/navbar :: navbar}"></div>
<div class="container">
  <div class="py-5 text-center">
    <h2>장바구니</h2>
  </div>
  <table class="table">
    <thead>
    <tr>
      <th>도서 제목</th>
      <th>수량</th>
      <th>가격 (1권)</th>
      <th>합계</th>
      <th>작업</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="item : ${cart}">
      <td th:text="${item.title}"></td>
      <td>
        <input type="number" name="quantity" class="form-control quantity" th:value="${item.quantity}" min="1" readonly>
      </td>
      <td th:text="${item.price} + '원'"></td>
      <td th:text="${item.totalPrice} + '원'" class="price"></td>
      <td>
        <form th:action="@{/cart/{bookId}/remove(bookId=${item.bookId})}" method="post">
          <button class="btn btn-danger btn-sm" type="submit">삭제</button>
        </form>
      </td>
    </tr>
    </tbody>
  </table>
  <div class="mt-4 text-center">
    <p><strong>총 합계:</strong> <span th:text="${totalPrice} + '원'" class="total-price">0원</span></p>
    <form th:action="@{/cart/checkout}" method="post">
      <button class="btn btn-primary btn-lg" type="submit">전체 주문하기</button>
    </form>
    <form th:action="@{/cart/clear}" method="post" class="mt-3">
      <button class="btn btn-danger" type="submit">장바구니 비우기</button>
    </form>
    <button class="btn btn-secondary mt-3" th:onclick="|location.href='@{/bookList}'|">쇼핑 계속하기</button>
  </div>
</div>
<div th:replace="~{fragments/footer :: footer}"></div>
</body>
</html>
